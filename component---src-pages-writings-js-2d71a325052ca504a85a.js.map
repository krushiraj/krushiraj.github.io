{"version":3,"sources":["webpack:///./src/pages/writings.js"],"names":["StyledFilterSummary","styled","div","StyledFilter","rhythm","colourStyles","control","styles","backgroundColor","option","data","isDisabled","isFocused","isSelected","colors","skyblue","blue","color","cursor","green","multiValue","text","multiValueLabel","background","multiValueRemove","red","Filter","render","this","props","options","setQuery","searchWritings","select","setSelection","closeMenuOnSelect","components","makeAnimated","defaultValue","filter","value","indexOf","isMulti","onChange","selections","action","selection","map","className","type","name","query","e","target","onSubmit","onClick","icon","faSearch","style","margin","opacity","React","Component","BreadCrumbHeader","title","showFilter","to","WritingsIndex","state","posts","checkForKeyword","node","typeSelection","frontmatter","projCheck","key","split","hasOwnProperty","toLowerCase","search","getOptionsFromProps","Object","getOwnPropertyNames","allMdx","edges","val","label","charAt","toUpperCase","slice","concat","setState","getDerivedStateFromProps","QueryString","parse","location","filters","push","length","componentDidMount","renderPosts","fields","slug","window","boxShadow","date","dangerouslySetInnerHTML","__html","description","site","siteMetadata","pathname","cb","SummaryFooter","goldenred","pageQuery"],"mappings":"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","file":"component---src-pages-writings-js-2d71a325052ca504a85a.js","sourcesContent":["import React from \"react\"\r\nimport { Link, graphql } from \"gatsby\"\r\nimport styled from \"styled-components\"\r\nimport QueryString from \"query-string\"\r\n\r\nimport Layout from \"../components/Layout\"\r\nimport { StyledPost, StyledSummary } from \"../components/styles/post\"\r\nimport { StyledCrumb } from \"../components/Layout/styles\"\r\nimport SEO from \"../components/SEO\"\r\nimport { colors } from \"../utils/theme\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\"\r\nimport Select from \"react-select\"\r\nimport makeAnimated from \"react-select/animated\"\r\nimport { rhythm } from \"../utils/typography\"\r\n\r\nconst StyledFilterSummary = styled.div`\r\n  display: flex;\r\n  align-items: left;\r\n\r\n  span {\r\n    border-radius: 25%;\r\n  }\r\n`\r\n\r\nconst StyledFilter = styled.div`\r\n  margin-bottom: ${rhythm(3)};\r\n\r\n  .text-query {\r\n    height: ${rhythm(1.5)};\r\n\r\n    input {\r\n      width: 100%;\r\n      border-radius: 6px 0 0 6px;\r\n    }\r\n\r\n    button {\r\n      width: ${rhythm(1.5)};\r\n      background: #fff;\r\n      border-radius: 0 6px 6px 0;\r\n      // padding: calc(${rhythm(1.5)} * 0.25) 0;\r\n    }\r\n\r\n    display: flex;\r\n  }\r\n`\r\n\r\nconst colourStyles = {\r\n  control: styles => ({ ...styles, backgroundColor: \"white\" }),\r\n  option: (styles, { data, isDisabled, isFocused, isSelected }) => {\r\n    return {\r\n      ...styles,\r\n      backgroundColor: isDisabled\r\n        ? null\r\n        : isSelected\r\n        ? colors.skyblue\r\n        : isFocused\r\n        ? colors.blue\r\n        : null,\r\n      color: isDisabled\r\n        ? \"#ccc\"\r\n        : isSelected\r\n        ? true\r\n          ? \"white\"\r\n          : \"black\"\r\n        : data.color,\r\n      cursor: isDisabled ? \"not-allowed\" : \"default\",\r\n\r\n      \":active\": {\r\n        ...styles[\":active\"],\r\n        backgroundColor: colors.green,\r\n      },\r\n    }\r\n  },\r\n  multiValue: styles => {\r\n    return {\r\n      ...styles,\r\n      backgroundColor: colors.text,\r\n    }\r\n  },\r\n  multiValueLabel: styles => ({\r\n    ...styles,\r\n    color: colors.background,\r\n  }),\r\n  multiValueRemove: styles => ({\r\n    ...styles,\r\n    color: colors.blue,\r\n    \":hover\": {\r\n      backgroundColor: colors.red,\r\n      color: \"white\",\r\n    },\r\n  }),\r\n}\r\n\r\nclass Filter extends React.Component {\r\n  render() {\r\n    const {\r\n      options,\r\n      setQuery,\r\n      searchWritings,\r\n      select,\r\n      setSelection,\r\n    } = this.props\r\n    return (\r\n      <>\r\n        <StyledFilter>\r\n          <Select\r\n            closeMenuOnSelect={false}\r\n            components={makeAnimated()}\r\n            defaultValue={options.filter(\r\n              ({ value }) => select.indexOf(value) !== -1\r\n            )}\r\n            isMulti\r\n            options={options}\r\n            styles={colourStyles}\r\n            onChange={(selections, action) => {\r\n              const selection =\r\n                selections != null ? selections.map(({ value }) => value) : []\r\n              setSelection(selection, searchWritings)\r\n            }}\r\n          />\r\n          <div className=\"text-query\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"query\"\r\n              value={this.props.query || \"\"}\r\n              onChange={e => {\r\n                setQuery(e.target.value, searchWritings)\r\n              }}\r\n              onSubmit={searchWritings}\r\n            />\r\n            <button onClick={searchWritings}>\r\n              <FontAwesomeIcon\r\n                icon={faSearch}\r\n                style={{ margin: \"auto 0\", opacity: 0.3 }}\r\n              />\r\n            </button>\r\n          </div>\r\n        </StyledFilter>\r\n        <StyledFilterSummary></StyledFilterSummary>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst BreadCrumbHeader = props => {\r\n  const {\r\n    options,\r\n    title,\r\n    showFilter,\r\n    data,\r\n    select,\r\n    setQuery,\r\n    setSelection,\r\n    query,\r\n    searchWritings,\r\n  } = props\r\n  return (\r\n    <>\r\n      <StyledCrumb>\r\n        <span>\r\n          <Link to={\"/\"}>{title}</Link>\r\n        </span>{\" \"}\r\n        <span>{\"/\"}</span>\r\n        <span>\r\n          <Link to={\"/writings\"}>{\"writings\"}</Link>\r\n        </span>\r\n        <span>{\">\"}</span>\r\n      </StyledCrumb>\r\n      {showFilter && (\r\n        <Filter\r\n          options={options}\r\n          data={data}\r\n          select={select}\r\n          searchWritings={searchWritings}\r\n          setQuery={setQuery}\r\n          setSelection={setSelection}\r\n          query={query}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default class WritingsIndex extends React.Component {\r\n  state = {\r\n    posts: [],\r\n    query: \"\",\r\n    selection: [],\r\n    select: [\"title\", \"description\"],\r\n  }\r\n\r\n  checkForKeyword = ({ node }) => {\r\n    const typeSelection =\r\n      this.state.selection.indexOf(\"projects\") !== -1 ?\r\n      \"project\" :\r\n      (\r\n        this.state.selection.indexOf(\"articles\") !== -1 ?\r\n        \"article\" :\r\n        \"\"\r\n      ),\r\n    type = node.frontmatter.type,\r\n    projCheck = (\r\n      typeSelection !== \"\" ?\r\n        typeSelection === type :\r\n        false\r\n    )\r\n\r\n    for (let key of this.state.selection) {\r\n      if (this.state.query === \"\" && typeSelection === \"\") return true\r\n      else {\r\n        for (let query of this.state.query.split(/[\\s,.]+/)) {\r\n          const subStrCheck = (\r\n            node.frontmatter.hasOwnProperty(key) &&\r\n            node.frontmatter[key]\r\n              .toLowerCase()\r\n              .search(query.toLowerCase()) !== -1 &&\r\n            projCheck\r\n          )\r\n          if (subStrCheck) return true\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  getOptionsFromProps = () => {\r\n    return Object.getOwnPropertyNames(\r\n      this.props.data.allMdx.edges[0].node.frontmatter\r\n    )\r\n      .filter(val => val !== \"type\")\r\n      .map(key => ({\r\n        value: key,\r\n        label: key.charAt(0).toUpperCase() + key.slice(1),\r\n        color: colors.background,\r\n      }))\r\n      .concat([\r\n        {\r\n          label: \"Type: Project\",\r\n          value: \"projects\",\r\n          color: colors.background\r\n        },\r\n        {\r\n          label: \"Type: Article\",\r\n          value: \"articles\",\r\n          color: colors.background\r\n        }\r\n      ])\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    let select = []\r\n\r\n    const filterOptions = QueryString.parse(props.location.search).filters\r\n      ? QueryString.parse(props.location.search).filters.split(\",\")\r\n      : []\r\n\r\n    for (let filter of filterOptions) {\r\n      if (state.select.indexOf(filter) === -1) select.push(filter)\r\n    }\r\n    return {\r\n      select: state.select.concat(select),\r\n      selection:\r\n        state.selection.length !== 0\r\n          ? state.selection\r\n          : state.select.concat(select),\r\n    }\r\n  }\r\n\r\n  searchWritings = () => {\r\n    const data = this.props.data.allMdx.edges\r\n    let posts = data.filter(this.checkForKeyword)\r\n    this.setState({ posts: posts }, () => {})\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.searchWritings()\r\n  }\r\n\r\n  renderPosts() {\r\n    return this.state.posts.map(({ node }) => {\r\n      const title = node.frontmatter.title || node.fields.slug\r\n      return (\r\n        <StyledPost\r\n          key={node.fields.slug}\r\n          style={{\r\n            cursor: \"pointer\",\r\n          }}\r\n          onClick={() => (window.location = node.fields.slug)}\r\n        >\r\n          <div className=\"writing\">\r\n            <h3>\r\n              <Link style={{ boxShadow: \"none\" }} to={node.fields.slug}>\r\n                {title}\r\n              </Link>\r\n            </h3>\r\n            <small>{node.frontmatter.date}</small>\r\n            <p\r\n              dangerouslySetInnerHTML={{\r\n                __html: node.frontmatter.description,\r\n              }}\r\n            />\r\n          </div>\r\n        </StyledPost>\r\n      )\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { data, location } = this.props\r\n    const title = data.site.siteMetadata.title\r\n    //fetching all available options\r\n    const options = this.getOptionsFromProps()\r\n    return (\r\n      <Layout location={location}>\r\n        <SEO frontmatter={{ title: \"Writings\", slug: \"/writings\" }} />\r\n        <BreadCrumbHeader\r\n          title={title}\r\n          options={options}\r\n          data={data}\r\n          showFilter={\r\n            location.pathname === \"/writings/\" ||\r\n            location.pathname === \"/writings\"\r\n          }\r\n          searchWritings={this.searchWritings}\r\n          query={this.state.query}\r\n          setQuery={(query, cb) => this.setState({ query }, cb)}\r\n          setSelection={(selection, cb) => this.setState({ selection }, cb)}\r\n          select={this.state.select}\r\n          location={location}\r\n        />\r\n        {this.renderPosts()}\r\n        <hr />\r\n        <SummaryFooter />\r\n      </Layout>\r\n    )\r\n  }\r\n}\r\n\r\nconst SummaryFooter = () => (\r\n  <StyledSummary style={{ color: colors.goldenred }}>\r\n    <strong>Reached the end.</strong> That&#39;s it for now.\r\n    <br />\r\n    Checkout this place after some time, may be I&#39;ll have new content ready\r\n    for you.\r\n  </StyledSummary>\r\n)\r\n\r\nexport const pageQuery = graphql`\r\n  query {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n      }\r\n    }\r\n    allMdx(\r\n      sort: { fields: [frontmatter___date], order: DESC }\r\n      filter: { frontmatter: { published: { ne: false } } }\r\n    ) {\r\n      edges {\r\n        node {\r\n          fields {\r\n            slug\r\n          }\r\n          frontmatter {\r\n            date(formatString: \"MMMM DD, YYYY\")\r\n            title\r\n            description\r\n            tags\r\n            type\r\n            technologies\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n"],"sourceRoot":""}