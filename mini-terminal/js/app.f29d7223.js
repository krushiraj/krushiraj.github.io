(function(e){function t(t){for(var n,o,a=t[0],l=t[1],c=t[2],d=0,h=[];d<a.length;d++)o=a[d],i[o]&&h.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var l=r[a];0!==i[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},i={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("64a9"),i=r.n(n);i.a},"0580":function(e,t,r){},"343a":function(e,t,r){},"35e6":function(e,t,r){"use strict";var n=r("343a"),i=r.n(n);i.a},"56d7":function(e,t,r){"use strict";r.r(t);var n=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app",tabindex:"0"},on:{focus:e.setFocus}},[r("TerminalContainer")],1)},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:{"--font-size":e.fontSize+"rem"},attrs:{id:"terminal-container",tabindex:"1"},on:{keydown:e.handleInput,click:function(t){return t.preventDefault(),e.openKeyboard(t)}}},[r("TerminalLogin",{attrs:{isLoggedIn:e.isLoggedIn}}),e._l(e.children,function(t,n){var i=t.child,s=t.props;return[r(i,e._b({key:n,tag:"component"},"component",s,!1))]})],2)},a=[],l=(r("28a5"),r("9ec8"),r("6b54"),r("55dd"),r("4917"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{attrs:{id:"terminal-input"}},[r("TerminalPWDUser",{attrs:{username:e.username,pwd:e.pwd}}),r("TerminalEditableWrapper",{attrs:{suggestions:e.suggestions,cursorIndex:e.cursorIndex,editableText:e.editableText}})],1)}),c=[],u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{attrs:{id:"user-pwd"}},[r("TerminalReadOnly",{attrs:{readOnlyText:e.username+"@"+e.sysname+":"+e.pwd+">"}})],1)},d=[],h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{attrs:{id:"readOnlyContainer"}},e._l(e.finalTexts,function(t,n){return r("span",{key:n},[e._v("\n        "+e._s(t)+"\n        "),e.breakOnNewLine?r("br"):e._e()])}),0)},p=[],m={name:"TerminalReadOnly",props:{readOnlyText:{type:String,default:""},breakOnNewLine:{type:Boolean,default:!1},trimLine:{type:Boolean,default:!0},simulateTyping:{type:Boolean,default:!1},typeSpeed:{type:Number,default:1}},computed:{finalTexts:e=>{let t=e.breakOnNewLine,r=e.readOnlyText,n=e.trimLine;if(t){let e=r.split("\n");return e.map(e=>n?e.trim():e).filter(e=>""!=e)}return[r]}}},g=m,f=(r("b03c"),r("2877")),y=Object(f["a"])(g,h,p,!1,null,"769b7a58",null),b=y.exports,T={name:"TerminalPWDUser",components:{TerminalReadOnly:b},props:{username:{type:String,required:!0},sysname:{type:String,default:"MiniTerminal"},pwd:{type:String,required:!0}}},x=T,v=Object(f["a"])(x,u,d,!1,null,null,null),O=v.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{attrs:{id:"editable-wrapper"}},[e._l(e.children,function(t,n){var i=t.child,s=t.props;return[r(i,e._b({key:n,tag:"component"},"component",s,!1))]})],2)},I=[],C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"editable"},[e._v(e._s(e.textToRender))])},k=[],S=(r("a481"),{name:"TerminalEditable",props:{editableText:{type:String,required:!0}},computed:{textToRender:e=>{return e.editableText.replace(/\s/g," ")}}}),P=S,_=Object(f["a"])(P,C,k,!1,null,null,null),E=_.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{attrs:{id:"cursor-tab-wrapper"}},[r("TerminalCursor",{attrs:{charBeneath:e.charBeneath}}),r("TerminalTabAutoComplete",{attrs:{suggestions:e.suggestions}})],1)},$=[],R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.hasSuggestions?r("ul",{attrs:{id:"suggestions"}},e._l(e.suggestions,function(t,n){return r("li",{key:n},[e._v("\n        "+e._s(t)+"\n    ")])}),0):e._e()},j=[],F={name:"TerminalTabAutoComplete",props:{suggestions:{type:Array,default:()=>[]}},computed:{hasSuggestions:e=>{let t=e.suggestions;return!!t.length}}},A=F,L=(r("633a"),Object(f["a"])(A,R,j,!1,null,null,null)),N=L.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"cursor",style:{"--animation-duration":e.blinkSpeed+"s"}},[e._v(e._s(e._charBeneath))])},B=[],z={name:"TerminalCursor",props:{blinkSpeed:{type:Number,default:1},charBeneath:{type:String,default:" "}},computed:{_charBeneath(e){let t=e.charBeneath;return t.replace(/\s/g," ")}}},W=z,M=(r("35e6"),Object(f["a"])(W,U,B,!1,null,null,null)),q=M.exports,H={name:"TerminalCursorTabWrapper",components:{TerminalCursor:q,TerminalTabAutoComplete:N},props:{suggestions:{type:Array,default:()=>[]},charBeneath:{type:String,default:" "}}},K=H,V=(r("867c"),Object(f["a"])(K,D,$,!1,null,null,null)),Y=V.exports,G={name:"TerminalEditableWrapper",components:{TerminalEditable:E,TerminalCursorTabWrapper:Y},props:{editableText:{type:String,required:!0},cursorIndex:{type:Number,required:!0},suggestions:{type:Array,required:!0}},methods:{appendChild(e,t,r){e.push({child:t,props:r})},appendEditableChild(e,t){this.appendChild(e,E,{editableText:t})},appendCursorChild(e,t,r){this.appendChild(e,Y,{charBeneath:t,suggestions:r})},appendChildrenFromText(e,t,r){const n=t.match(/([\/a-zA-z0-9_.()`!@#$%^&*\-=+,<>?'";|:\[\]{}]+)|(\s+)/g);if(1==t.length&&1==r)this.appendCursorChild(e,t,this.suggestions);else for(let i in n)this.appendEditableChild(e,n[i])}},computed:{children(e){let t=e.editableText,r=e.cursorIndex,n=[];const i=[t.slice(0,r),t[r]||" ",t.slice(r+1,t.length)];for(let s in i)this.appendChildrenFromText(n,i[s],s);return n}}},J=G,Z=Object(f["a"])(J,w,I,!1,null,null,null),Q=Z.exports,X={name:"TerminalInput",components:{TerminalPWDUser:O,TerminalEditableWrapper:Q},props:{editableText:{type:String,required:!0},cursorIndex:{type:Number,required:!0},pwd:{type:String,required:!0},username:{type:String,required:!0},suggestions:{type:Array,required:!0}}},ee=X,te=Object(f["a"])(ee,l,c,!1,null,null,null),re=te.exports,ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("TerminalReadOnly",{attrs:{breakOnNewLine:"",readOnlyText:e.welcomeText}})},ie=[],se={name:"TerminalLogin",components:{TerminalReadOnly:b},props:{isLoggedIn:{type:Boolean,required:!0}},computed:{welcomeText:e=>{let t=e.isLoggedIn;return"Welcome to Mini Terminal. Here you can checkout the profile of Krushi Raj Tula.\n                Copyright (c) 2019, Everyone - as this is an open-source site :P.\n            "+(t?"Need some help on how to use this? Use 'help' command.":"Please enter your username to establish a session. Guest is default username.\n            In case of any error in logging in with the username provided, the system will try to fallback to default username and establishes a session with default username.\n            *Note:Currently this terminal doesn't support handling of inputs from virtual keyboard. So, you can't use this on devices with touch screen.*")}}},oe=se,ae=Object(f["a"])(oe,ne,ie,!1,null,null,null),le=ae.exports,ce=(r("ac6a"),r("ade3")),ue=r("3835");const de={"/":{type:"directory",data:{folder1:{type:"directory",data:{folder2:{type:"directory",data:{}},file2:{type:"file",data:"Hello from file2."}}},file1:{type:"file",data:"Hello from file1.\nSecond line.\n Third line here."},file2:{type:"file",data:"Hello from file2!"}}}};class he{constructor(e){let t=e.name,r=e.type,n=e.parent,i=e.data,s=e.path;this.name=t,this.type=r,this.parent=n,this.path=s,this.data=i}}class pe{constructor(){this.fsRoot={},this.buildFsTree(de,void 0),this.currDir=this.fsRoot,this._currDir=this.fsRoot,this.currFile=void 0,this._currFile=void 0}insertNode(e,t,r){return Object.getOwnPropertyNames(e).length?e.data[r[0]]?this.insertNode(e.data[r[0]],t,r.slice(1)):e.data[r[0]]=this.insertNode({},t,r.slice(1)):e=t,e}buildFsTree(e,t){for(let r in e){const n=r,i=t?"/"!=t.path?t.path+"/"+n:t.path+n:n,s=t,o=e[r].type,a="file"==o?e[r].data:{},l=new he({name:n,path:i,parent:s,type:o,data:a});this.fsRoot=this.insertNode(this.fsRoot,l,i.split("/").filter(e=>""!=e)),"file"!=o&&this.buildFsTree(e[r].data,l)}}changeDirectory(){this.currDir=this._currDir,this.currFile=this._currFile}handleBaseEdgeConditions(e){return this._currDir=this.currDir,"/"==e?(this._currDir=this.fsRoot,this._currDir):"."==e?this._currDir:"/"==this._currDir.name&&".."==e?{error:"You are already in root directory. Cannot go beyond."}:void 0}getPathTokens(e){if(e)return e.replace(/\.\./g,"parent").match(/([a-zA-z0-9_.()`!@#$%^&*\-=+,<>?'";|:\[\]{}]+)|([\/]+)/g)}getNodeFromToken(e,t,r){if("/"==e)return{type:"continue"};if(this._currDir.hasOwnProperty("data")&&this._currDir.data.hasOwnProperty(e)||"parent"==e&&this._currDir.hasOwnProperty("parent"))return"parent"==e?this._currDir.parent:this._currDir.data[e];{const e=t.slice(0,r-1).join("");return{type:"error",error:`ENOENT: Error no such file or directory found at ${e}`.replace(/parent/g,"..")}}}handleFileEnt(e,t){if("/"==e)return{type:"error",error:"A file should not be followed by '/' as it can't be explored."};this._currFile=t}getEntFromPath(e,t){let r=this.handleBaseEdgeConditions(e);if(r)return r;const n=this.getPathTokens(e);for(let i in n){let e=n[i];switch(r=this.getNodeFromToken(e,n,i),r.type){case"error":return r;case"file":this.handleFileEnt(n[i+1],r);break;case"directory":this._currDir=r;break;case"continue":continue}if(i==n.length-1)return t&&this.changeDirectory(),"file"==r.type?this._currFile:this._currDir}}}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(r,!0).forEach(function(t){Object(ce["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const fe="Mini Terminal v1.0.190807";let ye={};const be=new pe,Te=(e,t)=>{return e==t||t.hasOwnProperty(e)},xe=(e,t,r)=>{if("help"==t["command"])return!0;r.hasOwnProperty("options")?r["options"]+=1:r["options"]=1;const n=r["options"]<=Object.getOwnPropertyNames(t.options).length,i=Te(e.slice(2),t["options"]),s=i&&n;if(!s){const n=`'${e}' is not a valid option for '${t.command}' command.`;r.message=n}return s},ve=(e,t)=>{t.hasOwnProperty("args")?t["args"]+=1:t["args"]=1;const r=t["args"]<=e["args"];if(!r){const r=`Maximum number arguments exceeded. You can pass upto ${e.args} arguments only.`;t.message=r}return r},Oe=(e,t,r,n)=>{if(r==e.length)return!0;const i=e[r],s=i.str,o=i.type;let a=!1;return a="optkey"==o?xe(s,t,n,a):"argument"!=o||ve(t,n,a),a&&Oe(e,t,r+1,n)},we=(e,t)=>{let r={message:""},n=!1;return t?(n=Oe(e,t,0,r),{isValid:n,info:r}):(r.message=`${e[0]["str"]} - command not found. Please check and try again.`,{isValid:n,info:r})},Ie=e=>{let t={command:"",options:{},args:[]};for(let r in e)switch(e[r].type){case"command":t.command=e[r].str;break;case"optkey":const n=parseInt(r)+2+"";t.options[e[r].str.slice(2)]=n<e.length?e[n].str:"";break;case"argument":t.args.push(e[r].str);break;default:continue}return t},Ce=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];ye.childrenData.push({child:b,props:{readOnlyText:e,breakOnNewLine:t,trimLine:r}})},ke=(e,t,r,n)=>{ye.childrenData.push({child:re,props:{pwd:e,cursorIndex:t,editableText:r}})},Se=()=>{ye.cursorIndex=0,ye.editableText="",ye.loggedIn||(ye.pwd="Username",ye.username="Guest");const e=ye,t=e.pwd,r=e.cursorIndex,n=e.editableText,i=e.username;ke(t,r,n,i)},Pe=e=>{let t=e.message;Ce(t),Se()},_e=()=>{const e=ye,t=e.username,r=e.sysname,n=e.pwd,i=e.commandTokens;Pe({message:`ERROR: ${t}@${r}:${n}: Permission denied. Cannot ${i[0].str}`})},Ee=e=>{var t=(new Option).style;return t.color=e,t.color==e},De=e=>{let t=e.command;const r=t.args[0]||".",n=be.getEntFromPath(r);let i;if("file"==n.type)i=["ERROR: Expected a directory name/path, but found file name/path."];else{i=[".",".."];for(let e in n.data)i.push(n.data[e].name)}Ce(i.join("\n")),Se()},$e=e=>{let t=e.command;const r=t.args[0];let n=void 0;if(void 0!=r){const e=be.getEntFromPath(r,!0);e.error||"directory"!=e.type?n="file"==e.type?`ERROR: ${r} is not a directory.`:e.error:ye.pwd=e.path}else n="ERROR: command cd expects a directory name as argument. No such name provided.";n&&Ce(n),Se()},Re=e=>{let t=e.command,r=t.args;const n=t.options["n"];let i;if("*"==r[0]){r=[];const e=be.getEntFromPath(".");for(let t in e.data)"file"==e.data[t].type&&r.push(e.data[t].name)}for(let s in r){const e=be.getEntFromPath(r[s]);i="file"==e.type?e.data:"directory"==e.type?`ERROR: ${e.name} is not a file.`:e.error,Ce((n?i.split("\n").map((e,t)=>`${t+1}) ${e}`).join("\n"):i)+"\nEOF")}Se()},je=()=>{ye.childrenData=[],Se()},Fe=e=>{let t,r=e.command,n=r.args,i=r.options,s="    ";const o=Object.getOwnPropertyNames(i);if(n.length||o.length)if(1!=n.length||o.length>1)t=["ERROR: Help command expects exactly one command name as argument and optionally followed by exactly one option in that command."];else{const e=qe.filter(e=>e.command==n[0])[0];if(t=[e.help],i.length){let r=o[0];t.push(`${s}--${r} - ${e.options[r]}`)}else for(let r in e.options)t.push(`${s}--${r} - ${e.options[r]}`)}else t=qe.map(e=>`[${e.command}] - ${e.help}`.replace(/\n/g,"\n"+s));Ce(t.join("\n"),!0,!1),Se()},Ae=()=>{const e=new Date;e.setMinutes(e.getMinutes()-1),document.cookie=`mini-username=;expires=${e.toUTCString()};path=/`,ye.prevLoggedIn=!1,ye.loggedIn=!1,Ce("You have been logged out successfully"),Se()},Le=()=>{Ce(fe),Se()},Ne=e=>{let t=e.command.args;const r=t[0]||1;let n;r<1?n="ERROR: Font-size should always be greater than 0.":(ye.fontsize=r,n=`Terminal font-size has been changed to ${r} unit(s).`),Ce(n),Se()},Ue=()=>{Ce(`Present working directory: '${ye.pwd}'`),Se()},Be=()=>{_e()},ze=()=>{_e()},We=()=>{_e()},Me=e=>{let t=e.command.options;const r=document.getElementsByTagName("body")[0],n=Object.getOwnPropertyNames(t).length;let i=[];n||(t={font:"fff",bg:"000"},i.push("No values provided, will fallback to default values"));for(let s in t){const e=Ee(t[s]);r.style.setProperty(`--${s}-color`,(e?"":"#")+`${t[s]}`),i.push(`Changed ${s} color to `+(e?"":"#")+`${t[s]}`)}Ce(i.join("\n")),Se()},qe=[{command:"help",options:{},args:1,help:"Usage: help <command name> <?options for command> \nDisplays help text for each of the command supported in this terminal and also provides help for each of the option for each command.",executor:Fe},{command:"ls",options:{},args:1,help:"Usage: ls <dir> \nList all files and directories in a given directory or current directory if no argument is provided.",executor:De},{command:"cd",options:{},args:1,help:"Usage: cd <dir> \nChanges present working directory to the given directory.",executor:$e},{command:"cat",options:{n:"Prints the line numbers before each line."},args:1/0,help:"Usage: cat <?...options> <file1> <...more files> \nConcatenates file contents and displays it.",executor:Re},{command:"clear",options:{},args:0,help:"Usage: clear \nClears all output text present from terminal.",executor:je},{command:"logout",options:{},args:0,help:"Usage: logout \nCloses the session to terminal.",executor:Ae},{command:"ver",options:{},args:0,help:"Usage: ver \nPrints the current version of the terminal.",executor:Le},{command:"color",options:{font:"Sets the color for font in terminal.",bg:"Sets the color for background of terminal."},args:0,help:"Usage: color <?...options>\nSets the colors of the elements in terminal according to the options provided.\nAll colors should be provided as valid color name according to css (or) 3 or 6 digited hex color codes, whithout '#' sign in the beginning.\nEx:000, fff, fafafa, 020202.",executor:Me},{command:"fontsize",options:{},args:1,help:"Usage: fontsize <size> \nSets the font-size of the text in terminal.\nIf no argument is provided, font-size falls back to default value.\nArgument size should always be greater than 0.",executor:Ne},{command:"mv",options:{},args:2,help:"Usage: mv <old-path> <new-path> \nMoves files/directories or renames them.",executor:We},{command:"rm",options:{r:"Recursively deletion in a directory."},args:1/0,help:"Usage: rm <file1> <?...files> \nRemoves files/directories from the disk.",executor:ze},{command:"mkdir",options:{},args:1,help:"Usage: mkdir <directory-name> \nCreates new directory in the path specified.",executor:Be},{command:"pwd",options:{},args:0,help:"Usage: pwd \nUsed to print the present working directory.",executor:Ue},{command:"sudo",options:{},args:0,help:"Usage: logout \nExecute a command with root user privileges.",executor:void 0}],He=e=>{const t=qe.filter(t=>{let r=t.command;return r==e[0]["str"]}),r=Object(ue["a"])(t,1),n=r[0],i=we(e,n),s=i.isValid,o=i.info;s?(o.command=Ie(e),n.executor(o)):Pe(ge({},o,{error:!0,data:void 0}))},Ke=e=>{if(ye=e,!ye.prevLoggedIn)return ye.prevLoggedIn=!0,Ce(`You are now logged in as ${ye.username}`),void Se();const t=e.commandTokens;""==t[0].str.trim()?Se():"sudo"==t[0].str?_e():t.length?He(t):Se()};class Ve{constructor(){this.comTrie={links:0},this.optTrie={links:0},this.fileTrie={links:0},this.commandList=[],this.buildCommandTrie(),this.buildOptionsTrie()}insertInTrie(e,t,r){if(r!=t.length){const n=t[r];return e.hasOwnProperty(n)||(e[n]={links:0}),e.links+=1,this.insertInTrie(e[n],t,r+1)}}buildTrieForFiles(e){this.fileTrie={links:0};for(let t in e.data)this.insertInTrie(this.fileTrie,e.data[t].name,0)}buildCommandTrie(){this.commandList=qe.map(e=>e.command);const e=this.commandList;for(let t in e)this.insertInTrie(this.comTrie,e[t],0)}buildOptionsTrie(){const e=this.commandList;for(let t in e){const r=Object.getOwnPropertyNames(qe.filter(r=>r.command==e[t])[0].options);this.optTrie[e[t]]={links:0};for(let n in r)this.insertInTrie(this.optTrie[e[t]],r[n],0)}}getCommandTrie(e){let t=this.comTrie;for(let r in e){if(!t.hasOwnProperty(e[r]))return;t=t[e[r]]}return t}getOptionsTrie(e,t){let r=this.optTrie[e];for(let n in t){if(!r.hasOwnProperty(t[n]))return;r=r[t[n]]}return r}getFilesTrie(e){let t=this.fileTrie;for(let r in e){if(!t.hasOwnProperty(e[r]))return;t=t[e[r]]}return t}getStringsFromTrie(e,t,r){if(!e)return;let n=r;if(0!=e.links)for(let i in e)"links"!=i&&this.getStringsFromTrie(e[i],t,n+i);else t.push(n)}getSuggestions(e,t,r){let n=[];return""==e?n:(e.length>0&&!r?this.getStringsFromTrie(this.getCommandTrie(e),n,""):e.length>0&&r&&"string"!=typeof t?(this.buildTrieForFiles(t),this.getStringsFromTrie(this.getFilesTrie(e),n,"")):t.length>-1&&r&&this.getStringsFromTrie(this.getOptionsTrie(e,t),n,""),n)}getCommonSubStr(e,t){if(!e)return;let r=t;const n=Object.getOwnPropertyNames(e);if(2==n.length){const t=n.indexOf("links")?0:1,i=n[t];return this.getCommonSubStr(e[i],r+i)}return r}autoComplete(e,t,r){let n="";return""==e?n:(e.length>0&&!r?n=this.getCommonSubStr(this.getCommandTrie(e),""):e.length>0&&r&&"string"!=typeof t?(this.buildTrieForFiles(t),n=this.getCommonSubStr(this.getFilesTrie(e),"")):t.length>-1&&r&&(n=this.getCommonSubStr(this.getOptionsTrie(e,t),"")),n)}}const Ye=new Ve;var Ge={name:"TerminalContainer",components:{TerminalLogin:le,TerminalInput:re},data(){return{editableText:"",cursorIndex:0,pwd:"Username",childrenData:[],history:[],hIndex:0,username:"Guest",prevLoggedIn:!1,loggedIn:!1,fontsize:1}},props:{sysname:{type:String,default:"MiniTerminal"},commands:{type:Array,default:()=>qe}},methods:{openKeyboard(){document.getElementById("terminal-container").focus()},isBackspace(e){return"Backspace"==e},isShiftKey(e){let t=e.shiftKey;return t},isPunctuationOrSymbol(e){return!!e.match(/[\/\.,';:"?\s*\-]/)},isAlNum(e){return!!e.match(/[a-zA-Z0-9]/)&&1==e.length},isTab(e){return"Tab"==e},isEnter(e){let t=e.key,r=e.keyCode;return 13==r||"Enter"==t},isArrow(e){return{check:e.startsWith("Arrow"),direction:e.slice(5)}},isControlActive(e){let t=e.metaKey,r=e.ctrlKey;const n=this.os;return"MacOS"==n?t||r:"Windows"==n&&r},lastPunctuationIndex(){const e=this.punctuationIndices;return e[e.length-1]||-1},handleBackspace(e){const t=this.editableText;let r;r=e?this.getNearestPunctIndex(0,this.punctuationIndices):this.cursorIndex-1,this.editableText=t.slice(0,-1==r?r*t.length:r)+t.slice(this.cursorIndex),this.cursorIndex=-1==r?0:r},getDirOffset(e){return e?1:-1},resolveNearestBase(e,t,r){return e[t+this.getDirOffset(r)]||(r?this.editableText.length+1:-1)},checkAndResolve(e,t,r){const n=e.indexOf(t);return n>-1?e[n+this.getDirOffset(r)]!=t+this.getDirOffset(r)?this.resolveNearestBase(e,n,r):this.resolveNearestBase(e,n+this.getDirOffset(r),r):n},getNearestPunctIndex(e,t){let r=t.slice(0);const n=this.cursorIndex,i=this.checkAndResolve(r,n,e);return i>-1?i:(r.push(n),r.sort((e,t)=>e-t),this.checkAndResolve(r,n,e))},moveCursor(e){if(e){const e=this.editableText.length;return this.cursorIndex==e?this.cursorIndex:this.cursorIndex+1}return 0==this.cursorIndex?this.cursorIndex:this.cursorIndex-1},moveCursorCtrl(e){const t=this.getNearestPunctIndex(e,this.punctuationIndices),r=!this.isPunctuationOrSymbol(this.editableText[t+(e?-1:1)]||"");return t+(r?e?-1:1:0)},handleSideArrows(e,t){this.cursorIndex="Left"==e?t?this.moveCursorCtrl(0):this.moveCursor(0):t?this.moveCursorCtrl(1):this.moveCursor(1)},setHistoryAsCurrent(e){const t=this.history,r=t[e],n=r.editableText,i=r.cursorIndex;this.hIndex=e,this.editableText=n,this.cursorIndex=i},handleVerticalArrows(e){const t=this.hIndex;if("Up"==e){if(0==t)return;this.setHistoryAsCurrent(t-1)}else{if(t==this.history.length)return;t==this.history.length-1?(this.hIndex=t+1,this.editableText="",this.cursorIndex=0):this.setHistoryAsCurrent(t+1)}},mutateText(e,t){const r=this.editableText,n=this.cursorIndex,i=r.slice(0,n),s=r.slice(n);this.editableText=i+(e?"":t)+s,this.cursorIndex+=1},getRequiredData(e){const t=e.key;return{char:t,ctrl:this.isControlActive(e),shift:this.isShiftKey(e),punctuation:this.isPunctuationOrSymbol(t),alnum:this.isAlNum(t),isTab:this.isTab(t),isEnter:this.isEnter(e),isArrow:this.isArrow(t),isLastCharPunc:this.isPunctuationOrSymbol(this.editableText[this.editableText.length-1]||"")}},autoComplete(){if(this.loggedIn){let e="";const t=this.commandTokens,r=t[t.length-1];if(!r)return;if("command"==r.type)e=Ye.autoComplete(r.str,"",!1);else if("optkey"==r.type&&r.str.length>1)e=Ye.autoComplete(t[0].str,r.str.slice(2),!0);else if("argument"==r.type&&!r.str.startsWith("-")){let t=be.getEntFromPath(r.str);(t.error||"file"==t.type)&&(t=be.getEntFromPath(".")),e=Ye.autoComplete(r.str,t,!0)}void 0!=e&&(this.editableText=this.editableText+e,this.cursorIndex=this.cursorIndex+e.length)}},getTokenType(e,t){const r=0!=t.length;return r||0==e.length?r?""==e.trim()?"delimiter":e.startsWith("--")?"optkey":t[t.length-2]["str"].startsWith("--")?"optval":"argument":void 0:"command"},paintEditableAsReadOnly(){const e=document.getElementById("user-pwd").textContent,t=this.childrenData[this.childrenData.length-1],r={child:b,props:{readOnlyText:e.trim().concat(" ",t.props.editableText),breakOnNewLine:!0}};this.childrenData.pop(),this.childrenData.push(r)},loginUser(){const e=new Date;e.setDate(e.getDate()+1),document.cookie=`mini-username=${this.editableText};expires=${e.toUTCString()};path=/`,document.cookie&&(this.loggedIn=!0,this.username=this.editableText,this.pwd="/",document.cookie=`mini-username=${this.editableText};expires=${e.toUTCString()};path=/`)},appendToHistory(){const e=this.cursorIndex,t=this.editableText;10==this.history.length&&(this.history.slice(1),this.hIndex-=1),this.history.push({editableText:t,cursorIndex:e}),this.hIndex+=1},processCommand(){this.appendToHistory(),this.paintEditableAsReadOnly(),this.isLoggedIn||this.loginUser(),Ke(this)},updateChanges(){const e=this.editableText,t=this.cursorIndex,r=this.pwd,n=this.username,i=this.suggestions,s=this.childrenData.length-1;"TerminalInput"==this.childrenData[s].child.name&&(this.childrenData[s].props={editableText:e,cursorIndex:t,pwd:r,username:n,suggestions:i})},copySelection(){navigator.clipboard.writeText(document.getSelection().toString())},pasteContent(){navigator.clipboard.readText().then(e=>{this.editableText=e,this.cursorIndex=e.length,this.updateChanges()})},handleInput(e){const t=this.getRequiredData(e),r=t.char,n=t.ctrl,i=(t.shift,t.punctuation),s=t.alnum,o=t.isTab,a=t.isEnter,l=t.isArrow;t.isLastCharPunc;if(a)this.processCommand();else if(n&&"c"==r.toLowerCase())this.copySelection();else if(n&&"v"==r.toLowerCase())this.pasteContent();else if(o)this.autoComplete();else if(this.isBackspace(r))this.handleBackspace(n);else if(l.check){const e=l.direction;"Left"==e||"Right"==e?this.handleSideArrows(l.direction,n):this.handleVerticalArrows(l.direction)}else(s||i)&&this.mutateText(n,r);this.updateChanges()}},computed:{fontSize(e){let t=e.fontsize;return t},commandTokens(e){let t=e.editableText;const r=this.getTokenType;let n=t.match(/([\/a-zA-z0-9_.()`!@#$%^&*\-=+,<>?'";|:\[\]{}]+)|(\s+)/g),i=[],s=0,o=0;for(let a in n)o=s+n[a].length-1,i.push({str:n[a],start:s,end:o,type:r(n[a],i)}),s=o+1;return i},punctuationIndices(e){let t=e.commandTokens;const r=t.filter(e=>{let t=e.str;return this.isPunctuationOrSymbol(t)});let n=[];for(let i in r){const e=r[i],t=e.start,s=e.end;t==s?n.push(t):n.push(t,s)}return n},os:()=>{var e=window.navigator.userAgent,t=window.navigator.platform,r=["Macintosh","MacIntel","MacPPC","Mac68K"],n=["Win32","Win64","Windows","WinCE"],i=["iPhone","iPad","iPod"],s=null;return-1!==r.indexOf(t)?s="MacOS":-1!==i.indexOf(t)?s="iOS":-1!==n.indexOf(t)?s="Windows":/Android/.test(e)?s="Android":!s&&/Linux/.test(t)&&(s="Linux"),s},isLoggedIn(){const e=document.cookie.split(";");let t=-1;for(let r=0;r<e.length;r++)if(null!==e[r].match("mini-username")){t=r;break}if(e&&-1!==t){const r=e[t].split("=")[1];""!==r&&(this.prevLoggedIn=!0,this.loggedIn=!0,this.pwd="/",this.username=r)}return this.loggedIn},children(e){let t=e.pwd,r=e.username,n=e.cursorIndex,i=e.editableText,s=e.childrenData,o=(e.isLoggedIn,e.suggestions);if(s&&0!=s.length)return s;{let e={pwd:t,username:r,cursorIndex:n,editableText:i,suggestions:o};return s.push({child:re,props:e}),s}},historyIndex(e){let t=e.hIndex;return t},suggestions(e){let t=e.commandTokens,r=e.loggedIn;if(r){const e=t[t.length-1];if(e){if("command"==e.type)return Ye.getSuggestions(e.str,"",!1);if("optkey"==e.type&&e.str.length>1)return Ye.getSuggestions(t[0].str,e.str.slice(2),!0);if("argument"!=e.type||e.str.startsWith("-"))return[];{let t=be.getEntFromPath(e.str);return(t.error||"file"==t.type)&&(t=be.getEntFromPath(".")),Ye.getSuggestions(e.str,t,!0)}}return[]}return[]}}},Je=Ge,Ze=(r("cab4"),Object(f["a"])(Je,o,a,!1,null,null,null)),Qe=Ze.exports,Xe={name:"app",components:{TerminalContainer:Qe},methods:{setFocus(){document.getElementById("terminal-container").focus()}}},et=Xe,tt=(r("034f"),Object(f["a"])(et,i,s,!1,null,null,null)),rt=tt.exports;n["a"].config.productionTip=!1,new n["a"]({render:e=>e(rt)}).$mount("#app")},"633a":function(e,t,r){"use strict";var n=r("0580"),i=r.n(n);i.a},"64a9":function(e,t,r){},"867c":function(e,t,r){"use strict";var n=r("8eca"),i=r.n(n);i.a},"8eca":function(e,t,r){},b03c:function(e,t,r){"use strict";var n=r("ec4c"),i=r.n(n);i.a},cab4:function(e,t,r){"use strict";var n=r("cd77"),i=r.n(n);i.a},cd77:function(e,t,r){},ec4c:function(e,t,r){}});
//# sourceMappingURL=app.f29d7223.js.map